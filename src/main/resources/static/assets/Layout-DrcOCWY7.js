import{d as _,c as u,o as l,k as A,a as s,u as re,r as x,l as b,m as N,n as se,p as le,q as z,w as n,f as r,s as F,N as C,g as ae,e as o,t as I,h as m,j as f,v as M}from"./index-BnxR2ysJ.js";import{a as ce}from"./auth-DfJRXFk4.js";import{g as ie}from"./menu-ByGSyEuP.js";import{_ as ue}from"./_plugin-vue_export-helper-BD_vjw2A.js";import{P as de}from"./PeopleSharp-CvimKWSy.js";import{R as O,S as pe,P as he}from"./ServerSharp--dvOvHLC.js";import{F as me}from"./FolderOpenSharp-CBaDinWN.js";const _e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ke=A('<path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M304 416V304h112"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M314.2 314.23L432 432"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M208 96v112H96"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M197.8 197.77L80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M416 208H304V96"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M314.23 197.8L432 80"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M96 304h112v112"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M197.77 314.2L80 432"></path>',8),we=[ke],fe=_({name:"ContractSharp",render:function(a,c){return l(),u("svg",_e,we)}}),ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ge=A('<path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M432 320v112H320"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M421.8 421.77L304 304"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M80 192V80h112"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M90.2 90.23L208 208"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M320 80h112v112"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M421.77 90.2L304 208"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M192 432H80V320"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="32" d="M90.23 421.8L208 304"></path>',8),xe=[ge],Ce=_({name:"ExpandSharp",render:function(a,c){return l(),u("svg",ve,xe)}}),Me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ye=s("path",{d:"M160 240h160V96a16 16 0 0 0-16-16H64a16 16 0 0 0-16 16v320a16 16 0 0 0 16 16h240a16 16 0 0 0 16-16V272H160z",fill:"currentColor"},null,-1),Se=s("path",{d:"M459.31 244.69L368 153.37L345.37 176l64 64H320v32h89.37l-64 64L368 358.63l91.31-91.32a16 16 0 0 0 0-22.62z",fill:"currentColor"},null,-1),be=[ye,Se],ze=_({name:"LogOutSharp",render:function(a,c){return l(),u("svg",Me,be)}}),$e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Le=s("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 0 0 3.8.4c8.3 0 11.5-6.1 11.5-11.4c0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 0 1-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5c-10.2-26.5-24.9-33.6-24.9-33.6c-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8c11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0 0 25.6-6c2-14.8 7.8-24.9 14.2-30.7c-49.7-5.8-102-25.5-102-113.5c0-25.1 8.7-45.6 23-61.6c-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 0 1 5-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 0 1 112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 0 1 5 .5c12.2 31.6 4.5 55 2.2 60.8c14.3 16.1 23 36.6 23 61.6c0 88.2-52.4 107.6-102.3 113.3c8 7.1 15.2 21.1 15.2 42.5c0 30.7-.3 55.5-.3 63c0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 0 0 4-.4C415.9 449.2 480 363.1 480 261.7C480 134.9 379.7 32 256 32z",fill:"currentColor"},null,-1),qe=[Le],Ve=_({name:"LogoGithub",render:function(a,c){return l(),u("svg",$e,qe)}}),Be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},He=s("path",{d:"M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z",fill:"currentColor"},null,-1),Ee=[He],Ne=_({name:"MenuSharp",render:function(a,c){return l(),u("svg",Be,Ee)}}),Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ie=s("path",{d:"M479.07 111.36l-.79-12.53l-12.36-2.21c-86.5-15.52-122.61-26.74-203.33-63.2l-6.59-3l-6.59 3C168.69 69.88 132.58 81.1 46.08 96.62l-12.36 2.21l-.79 12.53c-3.85 61.11 4.36 118.05 24.43 169.24A349.47 349.47 0 0 0 129 393.11c53.47 56.73 110.24 81.37 121.07 85.73l6 2.41l6-2.41c10.83-4.36 67.6-29 121.07-85.73a349.47 349.47 0 0 0 71.5-112.51c20.07-51.19 28.28-108.13 24.43-169.24zm-252.91 216L153.37 256l22.4-22.86l48.47 47.49l110.13-127.2l24.2 20.94z",fill:"currentColor"},null,-1),Oe=[Ie],Ue=_({name:"ShieldCheckmarkSharp",render:function(a,c){return l(),u("svg",Fe,Oe)}}),Ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Pe=s("path",{d:"M256 48C123.46 48 16 156.55 16 290.56a243.3 243.3 0 0 0 60.32 160.87c1.18 1.3 2.25 2.6 3.43 3.79C89.2 464 92.07 464 99.57 464s12.43 0 19.93-8.88C152 416.64 202 400 256 400s104.07 16.71 136.5 55.12C400 464 404.82 464 412.43 464s11.3 0 19.82-8.78c1.22-1.25 2.25-2.49 3.43-3.79A243.3 243.3 0 0 0 496 290.56C496 156.55 388.54 48 256 48zm-16 64h32v64h-32zm-96 192H80v-32h64zm21.49-83.88l-45.25-45.26l22.62-22.62l45.26 45.25zM278.6 307.4a31 31 0 0 1-7 7a30.11 30.11 0 0 1-35-49L320 224zm45.28-109.91l45.26-45.25l22.62 22.62l-45.25 45.26zM432 304h-64v-32h64z",fill:"currentColor"},null,-1),Re=[Pe],U=_({name:"SpeedometerSharp",render:function(a,c){return l(),u("svg",Ae,Re)}}),De={class:"logo"},Ge={key:0,class:"logo-text"},Te={key:0,class:"version-info"},je={class:"header-content"},Je={class:"header-left"},Ke={class:"header-right"},Qe={class:"user-info"},We={class:"username"},Xe={__name:"Layout",setup(d){const a=ae(),c=se(),P=re(),p=x(!1),h=x("/dashboard"),v=x([]),w=x(!1),g=b(()=>{const t=localStorage.getItem("user");return t?JSON.parse(t):null}),R=b(()=>{var e,i;return(((e=g.value)==null?void 0:e.nickname)||((i=g.value)==null?void 0:i.username)||"U").charAt(0).toUpperCase()}),y=t=>{const i={SpeedometerSharp:U,FolderOpenSharp:me,ServerSharp:pe,RocketSharp:O,PeopleSharp:de,ShieldCheckmarkSharp:Ue,MenuSharp:Ne}[t];return()=>F(C,null,{default:()=>F(i||U)})},$=async()=>{try{const t=await ie();v.value=L(t)}catch(t){console.error("加载菜单失败",t)}},L=t=>t.map(e=>({label:e.name,key:e.path,icon:y(e.icon),children:e.children?L(e.children):void 0})),D=b(()=>{let t=v.value.find(e=>e.key===h.value);if(t)return t.label;for(const e of v.value)if(e.children){const i=e.children.find(S=>S.key===h.value);if(i)return i.label}return"仪表盘"}),G=[{label:"个人信息",key:"profile",icon:y(he)},{label:"退出登录",key:"logout",icon:y(ze)}];N(()=>{h.value=c.path,$()});const T=t=>{h.value=t,a.push(t)},j=async t=>{if(t==="profile")a.push("/profile");else if(t==="logout")try{await ce()}catch(e){console.error(e)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),P.success("已退出登录"),a.push("/login")}},J=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),w.value=!1):(document.documentElement.requestFullscreen(),w.value=!0)},q=()=>{w.value=!!document.fullscreenElement},K=()=>{window.open("https://github.com/mars-deploy/mars-deploy","_blank")};return N(()=>{h.value=c.path,$(),document.addEventListener("fullscreenchange",q)}),le(()=>{document.removeEventListener("fullscreenchange",q)}),(t,e)=>{const i=r("n-menu"),S=r("n-text"),Q=r("n-layout-sider"),W=r("n-breadcrumb-item"),X=r("n-breadcrumb"),V=r("n-button"),B=r("n-tooltip"),Y=r("n-avatar"),Z=r("n-dropdown"),ee=r("n-space"),te=r("n-layout-header"),oe=r("router-view"),ne=r("n-layout-content"),H=r("n-layout");return l(),z(H,{"has-sider":"",class:"layout"},{default:n(()=>[o(Q,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:p.value,"show-trigger":"",onCollapse:e[1]||(e[1]=k=>p.value=!0),onExpand:e[2]||(e[2]=k=>p.value=!1)},{default:n(()=>[s("div",De,[o(m(C),{size:p.value?32:36,color:"#18a058"},{default:n(()=>[o(m(O))]),_:1},8,["size"]),p.value?I("",!0):(l(),u("span",Ge,"MarsDeploy"))]),o(i,{value:h.value,"onUpdate:value":[e[0]||(e[0]=k=>h.value=k),T],collapsed:p.value,"collapsed-width":64,"collapsed-icon-size":22,options:v.value},null,8,["value","collapsed","options"]),p.value?I("",!0):(l(),u("div",Te,[o(S,{depth:"3",style:{"font-size":"12px",color:"#999"}},{default:n(()=>[...e[3]||(e[3]=[f("Mars-Deploy v1.0",-1)])]),_:1})]))]),_:1},8,["collapsed"]),o(H,null,{default:n(()=>[o(te,{bordered:"",class:"header"},{default:n(()=>[s("div",je,[s("div",Je,[o(X,null,{default:n(()=>[o(W,null,{default:n(()=>[f(M(D.value),1)]),_:1})]),_:1})]),s("div",Ke,[o(ee,{size:16,align:"center"},{default:n(()=>[o(B,{placement:"bottom"},{trigger:n(()=>[o(V,{text:"",class:"icon-button",onClick:J},{default:n(()=>[o(m(C),{size:"20"},{default:n(()=>[w.value?(l(),z(m(fe),{key:1})):(l(),z(m(Ce),{key:0}))]),_:1})]),_:1})]),default:n(()=>[f(" "+M(w.value?"退出全屏":"全屏"),1)]),_:1}),o(B,{placement:"bottom"},{trigger:n(()=>[o(V,{text:"",class:"icon-button",onClick:K},{default:n(()=>[o(m(C),{size:"20"},{default:n(()=>[o(m(Ve))]),_:1})]),_:1})]),default:n(()=>[e[4]||(e[4]=f(" 查看源码 ",-1))]),_:1}),o(Z,{options:G,onSelect:j},{default:n(()=>{var k,E;return[s("div",Qe,[o(Y,{round:"",size:"small",style:{background:"#18a058"}},{default:n(()=>[f(M(R.value),1)]),_:1}),s("span",We,M(((k=g.value)==null?void 0:k.nickname)||((E=g.value)==null?void 0:E.username)),1)])]}),_:1})]),_:1})])])]),_:1}),o(ne,{"content-style":"padding: 24px;","native-scrollbar":!1},{default:n(()=>[o(oe)]),_:1})]),_:1})]),_:1})}}},st=ue(Xe,[["__scopeId","data-v-df600d58"]]);export{st as default};
